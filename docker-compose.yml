version: "3"
services:
  # torrent client to download media from the internet
  qbittorrent:
    image: linuxserver/qbittorrent
    container_name: qbittorrent
    environment:
      - WEBUI_PORT=8080
    ports:
      - 6881:6881
      - 6881:6881/udp
      - 8080:8080
    restart: always
  # media server to distribute downloaded media on the local network
  plex:
    image: linuxserver/plex
    container_name: plex
    environment:
      - VERSION=docker
    # Plex doesn't really run well behind NAT, so it is advised to use "host" network_mode
    network_mode: host
    restart: always
  # web app to control media server from a mobile phone
  home-media-app:
    image: gorolykmaxim/home-media-app:2.0.8
    container_name: home-media-app
    ports:
      - 80:8080
    restart: always
  # Plex logs listener, that notifies home-media-app about different events in Plex
  plex-listener:
    image: gorolykmaxim/plex-listener:1.0.4
    container_name: plex-listener
    depends_on:
      - plex
    restart: always